import React, { useEffect, useRef } from 'react';
import { gsap } from 'gsap';
import { useGSAP } from '@gsap/react';

const LogoAnimation = ({ onComplete }) => {
    const svgRef = useRef(null);

    useGSAP(() => {
        const paths = svgRef.current.querySelectorAll('path');

        gsap.set(paths, {
            strokeDasharray: (i, target) => target.getTotalLength(),
            strokeDashoffset: (i, target) => target.getTotalLength(),
            fillOpacity: 0,
            stroke: '#339966',
            strokeWidth: 2
        });

        const tl = gsap.timeline({
            onComplete: onComplete,
            defaults: { ease: "power2.inOut" }
        });

        tl.to(paths, {
            strokeDashoffset: 0,
            duration: 2,
            stagger: 0.1
        })
            .to(paths, {
                fillOpacity: 1,
                strokeOpacity: 0,
                duration: 0.8
            }, "-=0.5");

    }, { scope: svgRef });

    return (
        <div className="w-48 h-48 sm:w-64 sm:h-64 flex items-center justify-center">
            <svg
                ref={svgRef}
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 1918.5 1535.25"
                className="w-full h-full"
                preserveAspectRatio="xMidYMid meet"
            >
                <g transform="matrix(1.917554, 0, 0, 1.917554, 0.222902, 0.00004)">
                    <path fill="#339966" d="M 477.500216 161.000151 L 523.499974 161.000151 L 524.50019 162.000367 L 537.500963 162.000367 L 538.499142 163.000583 L 547.499051 163.000583 L 548.499267 164.000799 L 555.50078 164.000799 L 556.500996 165.001015 L 574.500813 166.999411 L 620.500571 177.999751 L 659.500853 192.000741 C 725.967356 220.532365 781.800196 259.699689 826.999374 309.500676 C 846.799987 331.032824 864.46572 354.699854 880.000645 380.499727 L 887.000121 397.499327 L 888.000338 402.500408 L 888.000338 418.499793 L 881.999041 436.499609 L 856.999748 474.499675 C 840.599055 496.767217 822.434233 517.266555 802.499171 535.999728 C 760.166193 576.334311 709.499439 608.33308 650.500945 632.000109 L 607.499798 645.999061 L 557.499175 655.999185 L 540.499575 656.999402 L 539.499359 657.999618 L 527.500839 657.999618 L 526.500623 658.999834 L 474.499568 658.999834 L 473.499352 657.999618 L 462.499011 657.999618 L 461.500832 656.999402 L 437.499718 655.001006 L 394.500609 645.999061 C 369.032783 639.134034 345.365753 630.466172 323.499521 619.999552 C 267.300002 593.199463 219.13277 558.367088 178.99986 515.50039 C 158.932387 494.233064 140.93257 470.900119 125.00041 445.499518 L 115.000285 424.499053 L 112.999853 414.500965 L 112.999853 406.499236 L 117.000718 389.499635 L 137.000967 356.50065 C 154.399839 331.566545 173.900998 308.732689 195.500371 287.999084 C 233.832484 250.999235 278.834063 220.666814 330.498997 196.999784 C 354.166026 186.333528 379.833488 177.665667 407.499344 171.000275 L 432.500674 165.999195 L 453.499102 164.000799 L 454.499319 163.000583 L 463.499227 163.000583 L 464.499443 162.000367 L 476.5 162.000367 Z" />
                    <path fill="#f5f1e4" d="M 497.999555 222.999293 L 496.999339 223.999509 L 484.000603 223.999509 L 476.99909 225.999942 L 472.000046 225.999942 L 448.000969 233.999634 L 427.000504 246.000191 L 407.000255 261.999575 L 393.999482 278.000997 C 388.000222 286.000689 382.667094 295.332645 378.000097 306.000938 L 371.000621 328.999798 L 370.000405 342.000572 L 369.000189 343.000788 L 369.000189 360.000388 L 372.000838 366.999864 C 375.333533 371.666861 380.332577 374.667509 387.000006 375.999773 L 393.999482 375.999773 L 402.99939 372.000945 C 406.334123 369.332344 408.666603 365.999648 410.000903 362.000821 L 410.999082 342.000572 L 416.000163 323.000539 C 419.998991 313.000414 425.000072 304.666637 430.999332 297.999209 C 440.333324 286.000689 452.333881 277.000781 467.001002 270.999484 L 485.000819 266.00044 L 505.999247 265.000224 L 514.000976 260.999359 C 517.333672 258.332795 519.666152 254.666015 521.000452 249.999018 C 522.332716 241.999326 521.3325 236.334151 517.999804 232.999418 C 514.667108 226.334026 507.999679 222.999293 497.999555 222.999293 Z" />
                    <path fill="#f5f1e4" d="M 333.000556 258.000748 C 299.667486 275.332396 269.99916 296.000813 243.999651 319.99989 C 215.333578 345.999399 190.334285 375.999773 168.999735 410.001011 C 183.666856 434.666219 200.666457 457.000985 220.000574 476.999197 C 256.000208 514.999263 298.999317 546.333937 348.99994 570.999145 C 371.000621 581.667439 395.333782 589.999178 421.999423 596.000475 L 442.999888 599.999303 L 456.000661 600.999519 L 457.000878 601.999735 L 479.999738 602.999951 L 480.999954 604.000168 L 521.000452 604.000168 L 522.000669 602.999951 L 534.999404 602.999951 L 535.999621 601.999735 L 552.999221 600.999519 L 589.000892 594.000043 L 621.999877 583.999919 C 646.000991 575.334095 668.333719 564.665801 689.0001 551.999113 C 712.333045 537.334029 734.333726 521.00056 755.000107 503.000743 C 784.332312 475.666934 810.333858 445.000428 833.000671 410.99919 C 815.666986 382.999249 796.000821 357.999956 774.00014 335.999275 C 743.999766 304.666637 709.332396 278.667128 670.000067 258.000748 L 667.999635 259.000964 C 675.999327 270.999484 682.332671 285.000473 686.999668 300.999857 L 692.000749 322.000322 L 693.000965 335.999275 L 693.999144 336.999491 L 693.999144 373.99934 L 693.000965 374.999557 L 693.000965 382.999249 L 687.999884 408.000579 L 682.000624 426.000395 C 672.666631 448.667208 659.999943 468.667458 644.000558 485.999105 C 629.999569 500.666226 614.334269 513.332915 597.000584 523.999171 C 585.666159 530.6666 573.667639 535.999728 561.000951 540.000593 L 545.999745 543.99942 L 530.000361 547.000069 L 523.000885 547.000069 L 522.000669 548.000285 L 480.999954 548.000285 L 479.999738 547.000069 L 466.000786 545.999853 L 445.000321 541.000809 C 417.000379 532.332948 393.667435 519.334212 374.999449 502.000527 C 352.332636 483.332541 334.666904 459.999597 322.000215 431.999655 L 312.00009 401.999282 L 307.999226 379.000421 L 307.999226 368.00008 L 306.99901 366.999864 L 306.99901 344.001004 L 307.999226 343.000788 L 307.999226 333.000663 L 312.00009 309.999766 L 322.000215 279.999392 L 333.000556 259.999143 Z" />
                </g>
            </svg>
        </div>
    );
};

export default LogoAnimation;
